{% extends 'base.html.twig' %}

{% block title %}Ajouter un Nouvel utilisateur!{% endblock %}
{% block body %}
    <section class="app-content">
        {{ form_start(form) }}
        <div class="col-md-6">
            <div class="widget">
                <header class="widget-header">
                    <h4 class="widget-title">Informations d'Agence</h4>
                </header><!-- .widget-header -->
                <hr class="widget-separator">
                <div class="widget-body">
                    <div class="form-group">
                        <label for="email">Nom d'Agence</label>
                        {{ form_widget(form.NomAgence,  {'attr' : {'placeholder' : "Nom"},"id":"nomag"}) }}
                        {% if form_errors(form.NomAgence) %}
                            <div class="alert alert-danger alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                <strong>Erreur !</strong><span>{{form_errors(form.NomAgence)}} </span>

                            </div>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">Email</label>
                        {{ form_widget(form.Email, {'attr' :  {'placeholder' : "Nom"},"id":"nomag"}) }}
                    {% if form_errors(form.Email) %}
                        <div class="alert alert-danger alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                            <strong>Erreur !</strong><span>{{form_errors(form.Email)}} </span>

                        </div>
                    {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="email">Pays</label>
                        {{ form_widget(form.Pays,  {'attr' : {'placeholder' : "Pays",'class' : 'form-control'},"id":"Pays"}) }}

                    </div>
                    <div class="form-group">
                        <label for="email">Ville</label>
                        {{ form_widget(form.Ville,  {'attr' : {'placeholder' : "Vile",'class' : 'form-control'},"id":"ville"}) }}
                    </div>

                    <div class="form-group">
                        <label for="email">Adresse</label>
                        {{ form_widget(form.Adresse,  {'attr' : {'placeholder' : "Adresse"},"id":"Adresse"}) }}
                        {% if form_errors(form.Adresse) %}
                            <div class="alert alert-danger alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                <strong>Erreur !</strong><span>{{form_errors(form.Adresse)}} </span>

                            </div>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="email">CodePostal</label>
                        {{ form_widget(form.CodePostal,  {'attr' : {'placeholder' : "CodePostal"},"id":"CodePostal"}) }}
                        {% if form_errors(form.CodePostal) %}
                            <div class="alert alert-danger alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                <strong>Erreur !</strong><span>{{form_errors(form.CodePostal)}} </span>

                            </div>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="email">Telephone</label>
                        {{ form_widget(form.Telephone,  {'attr' : {'placeholder' : "Telephone"},"id":"Telephone"}) }}
                        {% if form_errors(form.Telephone) %}
                            <div class="alert alert-danger alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                <strong>Erreur !</strong><span>{{form_errors(form.Telephone)}} </span>

                            </div>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="email">Fax</label>
                        {{ form_widget(form.Fax,  {'attr' : {'placeholder' : "Fax"},"id":"Fax"}) }}
                        {% if form_errors(form.Fax) %}
                            <div class="alert alert-danger alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                <strong>Erreur !</strong><span>{{form_errors(form.Fax)}} </span>

                            </div>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="email">Utilisateur</label>
                        {{ form_widget(form.Utilisateur,  {'attr' : {'placeholder' : "Utilisateur",'class' : 'form-control'},"id":"user"}) }}
                        {% if form_errors(form.Utilisateur) %}
                            <div class="alert alert-danger alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                <strong>Erreur !</strong><span>{{form_errors(form.Utilisateur)}} </span>

                            </div>
                        {% endif %}
                    </div>


                </div><!-- .widget-body -->
            </div><!-- .widget -->
        </div><!-- END column -->

        <div class="col-md-6">
            <div class="widget">
                <header class="widget-header">
                    <h4 class="widget-title">Information Directeur</h4>
                </header><!-- .widget-header -->
                <hr class="widget-separator">
                <div class="widget-body">
                    <div class="form-group">
                        <label for="email">Nom de Directeur</label>
                        {{ form_widget(form.NomDirecteur, {'attr' : {'placeholder' : "NomDirecteur"}}) }}
                    </div>
                    {% if form_errors(form.NomDirecteur) %}
                        <div class="alert alert-danger alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                            <strong>Erreur !</strong><span>{{form_errors(form.NomDirecteur)}}</span>

                        </div>
                    {% endif %}
                    <div class="form-group">
                        <label for="email">Email Directeur</label>
                        {{ form_widget(form.EmailDirecteur, {'attr' : {'placeholder' : "EmailDirecteur"}}) }}
                    </div>
                    {% if form_errors(form.EmailDirecteur) %}
                        <div class="alert alert-danger alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                            <strong>Erreur !</strong><span>{{form_errors(form.EmailDirecteur)}}</span>

                        </div>
                    {% endif %}
                    <div class="form-group">
                        <label for="email">Telephone de Directeur</label>
                        {{ form_widget(form.TelephoneDirecteur, {'attr' : {'placeholder' : "Numéro de téléphone"}}) }}
                    </div>
                    {% if form_errors(form.TelephoneDirecteur) %}
                        <div class="alert alert-danger alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                            <strong>Erreur !</strong><span>{{form_errors(form.TelephoneDirecteur)}}</span>

                        </div>
                    {% endif %}
                    <div class="form-group">
                        <label for="email">Date de Creation</label>
                        {{ form_widget(form.DateCreation) }}
                        {{ form_errors(form.DateCreation) }}
                    </div>
                    <div class="form-group">
                        <label for="email">Nombre d'Employes</label>
                        {{ form_widget(form.NombreEmployes, {'attr' : {'placeholder' : "NombreEmployes"}}) }}
                        {{ form_errors(form.NombreEmployes) }}
                    </div>
                    <div class="form-group">
                        <label for="email">Logo</label>
                        {{ form_widget(form.Logo, {'attr' : {'placeholder' : "NombreEmployes"}}) }}
                        {{ form_errors(form.Logo) }}
                    </div>
                    <div class="form-group">
                        {{ form_widget(form.Sauvegarder) }}
                    </div>
                </div>

            </div>
        </div>
        {{ form_end(form) }}
        <!-- .row -->
    </section><!-- #dash-content -->
{% endblock %}
{% block javascripts %}
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>

    <script>
        function passValidation() {
            var password = document.getElementById("psswdId").value;

            var AE   = document.getElementById("AE").  valueOf();
            var Min  = document.getElementById("Min"). valueOf();
            var Maj  = document.getElementById("Maj"). valueOf();
            var Chif = document.getElementById("Chif").valueOf();
            var Char = document.getElementById("Char").valueOf();

            if (password.match(/\s/)) { AE.style.color = "#F44336";}
            else{ AE.style.color = "#3ae374";}

            if (password.match(/[A-Z]/)) { Maj.style.color = "#3ae374";}
            else{ Maj.style.color = "#F44336";}

            if (password.match(/[a-z]/)) { Min.style.color = "#3ae374";}
            else{Min.style.color = "#F44336";}

            if (password.match(/[0-9]/)) {Chif.style.color = "#3ae374";}
            else{Chif.style.color = "#F44336";}

            if (password.length<8) {Char.style.color = "#F44336";}
            else {Char.style.color = "#3ae374";}

        }
        function generatePass(this_) {
            var url=$(this_).data('href');
            axios.get(url).then(function (response) {
                if (response) {
                    Swal.fire({
                        title: '<strong>Mot de passe<strong>',
                        icon: 'info',
                        html:
                            '<input type="text" id="randpass" class="form-control" readonly value="' + response.data.RandPass + '" >',
                        showCloseButton: false,
                        showCancelButton: false,
                        focusConfirm: false,
                        confirmButtonColor: '#0000',
                        confirmButtonText:
                            '<button type="button" onclick="copyToClipboard()" class="btn btn-outline btn-dark"><i class="fa fa-file"></i></button>',
                        cancelButtonText:
                            'Retour',
                    })
                }
            })
        }
        function copyToClipboard() {
            var message = document.getElementById("randpass");
            message.select();
            document.execCommand('copy');
            document.getElementById('psswdId').value=message.value;

            AE.style.color =   "#3ae374";
            Maj.style.color =  "#3ae374";
            Min.style.color =  "#3ae374";
            Chif.style.color = "#3ae374";
            Char.style.color = "#3ae374";

        }
    </script>
{% endblock %}